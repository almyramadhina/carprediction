<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Skin care recommendation</title>
        <link rel="stylesheet" type="text/css" href="style.css"/>
        <link href="https://fonts.googleapis.com/css?family=Fira+Sans" rel="stylesheet">
        <script src="main.js"></script>
    </head>

	<body>
        <form class="form">
            <h2>Please input the variables</h2>
            <div class="formPrice" id="inputYear">
                <input id="year" name="year" type="number" placeholder="Year"/>
            </div>
            <div class="formPrice" id="inputHP">
                <input id="hp" name="hp" type="number" placeholder="Engine HP"/>
            </div>
            <div class="formPrice" id="inputCyl">
                <input id="cyl" name="cyl" type="number" placeholder="Engine Cylinder"/>
            </div>

            <div class="buttonContainer">
                <a class="button" onclick="sendForm()" href="#">Predict the price</a>
            </div>
        </form>
	</body>
</html>

<script>
    function sendForm() {
    var year = parseInt(document.getElementById("year").value);
    var hp = parseFloat(document.getElementById("hp").value);
    var cyl = parseFloat(document.getElementById("cyl").value);

    var data = '';

    data = {
        "tahun": year,
        "engine hp": hp,
        "engine cylinder": cyl
    };

    console.log(data);
    var reqdata = JSON.stringify(data);
    window.localStorage.setItem('data', reqdata);
    }
    var reqdata = JSON.parse(window.localStorage.getItem('data'));
    $(document).ready(function(){
        $.ajax({
            url: '',
            type:'POST',
            dataType: 'json',
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify(reqdata),
            success: function(response) {
			    console.log(response);
                hasil = '';
                var recprod = document.getElementById('products')
                if (!response.data) { //request ga lengkap
                    hasil = '<p style="font-size:150%;"> Oops, sorry you did not complete the form :( </p> <img class="card-img-top" src="https://stickershop.line-scdn.net/stickershop/v1/product/1037839/LINEStorePC/main.png;compress=true"> </img>';
                    recprod.innerHTML = hasil;
                } else {
                    hasil = '';
                    $.append(hasil);
                }
            },
            error: function(response) {
                console.log(response);
            }    
        })
    localStorage.removeItem('data');
    });
</script>